# LHPageJumper
### 应用场景

服务端利用极光推送，通过参数主动调起客户端的某些界面：

- 在客户端主动弹出某些页面，依据webView所需的**Url** 跳转到 **广告**，**限时优惠**，**抽奖活动**等等活动界面

- 收到某个会员发送的聊天消息的推送，点击通知横幅，根据聊天会的id，直接跳转到**聊天会话界面**

- 某个订单的状态有变更，点击通知横幅，依据订单id直接跳转到**订单详情**，或者依据状态码对应的某标签页的订单列表

###背景

早期的做法是，客户端将所有需要展现的控制器的逻辑和功能全部完善，通过参数重的某些标识值来判断是什么业务类型，然后实例化对应的控制器，实例化的时候可能重写过这些控制器的初始化方法，从推送的参数中取值来给实例化方法传参。

这种方法在实现功能上没有什么大的问题，但是并不是最好的解决办法



###实现
**核心思路是尽量将逻辑的判断交给服务端处理，精简客户端的业务逻辑代码，客户端只需要做实例化和跳转的工作**

- 客户端将需要推送调起的类全部完成，实例化方法不用重写，类暴露出必要的外部属性，并不是说重写构造方法不好，而是因为如果重写了构造方法势必要增加一些逻辑判断，不符合客户端处理尽量简单的原则

- 与接口人员定义好所有跳转业务的参数接口的固定结构

- 利用runtime的简单接口实现控制器跳转的类


###例子

下面是一个根据参数跳转到某个web页面的例子:

参数字典

第一级结构`@{@"page":@"xxx",@"property":@"xxx"}`是必须的

property字典的key-value是某些业务的某些类需要固定的参数

```
@{
	@"page": @"KPWebViewController",
	@"property": @{
					@"strUrl": @"http://www.baidu.com",
					@"strtitle": @"这是某个webView"
					}					
};

```
可跳转的类声明

对属性赋值的过程是利用runtime获取属性列表自动完成

```
#import "BaseViewController.h"

@interface KPWebViewController : BaseViewController <UIWebViewDelegate>

//需要加载的web资源地址
@property (nonatomic, strong) NSString *strUrl;
//导航栏标题
@property (nonatomic, strong) NSString *strtitle;
@end

```

实际上的应用是从推送中取得参数字典后，跳转到活动的h5界面，这时候h5网页中可能涉及到 javascript 代码调用oc接口的功能，这部分要和h5的开发人员沟通好，客户端人员可以提供哪些支持














	